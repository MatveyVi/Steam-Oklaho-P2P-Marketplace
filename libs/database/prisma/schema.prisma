generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String @id @default(cuid())
  name         String
  email        String @unique
  passwordHash String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Profile {
  id     String @default(cuid())
  userId String @unique
  email  String @unique

  nickname  String  @unique
  avatarUrl String?
  bio       String?

  tradeUrl String?
  rating   Float   @default(0)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model BaseItem {
  id         String @id @default(cuid())
  externalId String @unique

  name        String
  description String
  imageUrl    String
  rarity      String
  type        String
  collection  String
}

model Item {
  id      String @id @default(cuid())
  ownerId String

  externalId String

  float   Float?
  pattern Int?

  status StatusEnum @default(AVAILABLE)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum StatusEnum {
  AVAILABLE
  LISTED
}

model Listing {
  id       String @id @default(cuid())
  itemId   String @unique
  sellerId String

  price  Decimal       @db.Decimal(10, 2)
  status ListingStatus @default(ACTIVE)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum ListingStatus {
  ACTIVE
  SOLD
  DELISTED
  PENDING
}
